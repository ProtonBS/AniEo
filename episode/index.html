<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script defer data-domain="ani.mom" src="https://plausible.io/js/script.js"></script>
    <title>Ani.MoM - Episode Details</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1.0.0/dist/hls.min.js"></script>
    <!--ShareThis-->
    <script type='text/javascript' src='https://platform-api.sharethis.com/js/sharethis.js#property=673480d151224300122167a2&product=sop' async='async'></script>
    <style>
        /* General styles for the page */
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: #fff;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        /* Header section */
        header {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            padding: 20px;
            background-color: #1f1f1f;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        header h1 {
            margin: 0;
            font-size: 24px;
            color: #fff;
        }

        /* Search Box Inside Content */
        .search-box-content {
            margin-top: 30px;
            text-align: center;
        }

        .search-box-content input {
            padding: 15px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            outline: none;
            background-color: #333;
            color: #fff;
            width: 60%;
            max-width: 500px;
        }

        .search-box-content button {
            background-color: transparent;
            border: none;
            padding: 10px;
            cursor: pointer;
            color: #fff;
            font-size: 16px;
            display: flex;
            align-items: center;
        }

        .search-box-content button i {
            font-size: 20px;
        }

        .search-box-content button:hover {
            background-color: #333;
        }

        /* Video player box */
        .video-player-container {
            margin: 40px auto;
            text-align: center;
            width: 80%;
            max-width: 800px;
        }

        video {
            width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .quality-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .quality-buttons button {
            padding: 10px 20px;
            background-color: #333;
            border: none;
            color: #fff;
            border-radius: 8px;
            cursor: pointer;
        }

        .quality-buttons button:hover {
            background-color: #555;
        }

        /* Episode name */
        .episode-name {
            font-size: 24px;
            font-weight: bold;
            color: #39ff14; /* Light neon green color */
            margin-bottom: 20px;
        }

        /* Preloader styles */
        .preloader {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #39ff14; /* Green neon color */
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Navigation buttons */
        .navigation-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .navigation-buttons button {
            padding: 10px 20px;
            background-color: #333;
            border: none;
            color: #fff;
            border-radius: 8px;
            cursor: pointer;
        }

        .navigation-buttons button:hover {
            background-color: #555;
        }

        /* Responsiveness for small screens */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                align-items: flex-start;
            }

            .search-box-content input {
                width: 80%;
            }

            .video-player-container {
                width: 95%;
            }
        }
    </style>
</head>
<body>

    <!-- Header Section -->
    <header onclick="window.location='/'">
    <h1>Ani<span class="dot">.</span>MoM</h1>
    
</header>


    <!-- Search Box Inside Content -->
    <div class="search-box-content">
        <input type="text" placeholder="Search for anime episode..." id="search-input">
    </div>

    <!-- Preloader -->
    <div id="preloader" class="preloader">
        <div class="loader"></div>
    </div>

    <!-- Video Player Container -->
    <div class="video-player-container" id="videoContainer" style="display: none;">
        <!-- Episode Name will be dynamically inserted here -->
        <div id="episodeName" class="episode-name"></div>

<!-- ShareThis BEGIN --><div class="sharethis-inline-share-buttons"></div><!-- ShareThis END -->
        <br>
        <video id="videoPlayer" controls>
            <!-- Video source will be dynamically added here -->
        </video>

        <div class="quality-buttons" id="qualityButtons">
            <!-- Quality buttons will be added dynamically -->
        </div>

        <!-- Navigation buttons -->
        <div class="navigation-buttons">
            <button id="previousButton">Previous</button>
            <button id="nextButton">Next</button>
        </div>
    </div>
<br>
<div class="neon-banner">
    New Website Live! Sorry for the inconvenience! <br>
    Report An Issue On Telegram 
    <a href="https://telegram.dog/zoronewera" target="_blank">
        <img class="telegram-icon" src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram">
    </a>
</div>

<style>
    /* Apply the Sour Gummy font */
    body {
        font-family: 'Sour Gummy', sans-serif;
    }

    .neon-banner {
        background-color: #121212;
        color: #ffffff;
        padding: 10px;
        text-align: center;
        font-size: 14px; /* Small font size */
        font-weight: 600;
        border-radius: 8px;
        box-shadow: 0 0 20px rgba(0, 255, 0, 0.6), 0 0 30px rgba(255, 255, 255, 0.1);
        transition: box-shadow 0.3s ease, transform 0.3s ease;
    }

    .neon-banner:hover {
        transform: translateY(-5px);
        box-shadow: 0 0 50px rgba(0, 255, 0, 0.8), 0 0 70px rgba(255, 255, 255, 0.2);
    }

    .neon-banner a {
        color: #00f5f5;
        text-decoration: none;
        font-weight: 600;
        transition: color 0.3s ease, transform 0.3s ease;
    }

    .neon-banner a:hover {
        color: #ff4081;
        transform: scale(1.1);
    }

    .telegram-icon {
        width: 25px; /* Smaller icon */
        height: 25px;
        margin-left: 10px;
        transition: transform 0.5s ease, opacity 0.3s ease;
    }

    .telegram-icon:hover {
        transform: rotate(360deg);
        opacity: 0.8;
    }

    /* Light Green Neon Border Text */
    .neon-banner {
        text-shadow: 
            0 0 3px rgba(0, 255, 0, 0.5), /* Dim Green glow */
            0 0 6px rgba(0, 255, 0, 0.6),
            0 0 9px rgba(0, 255, 0, 0.7),
            0 1px 8px rgba(255, 255, 255, 0.2), /* Dim White glow */
            0 1px 10px rgba(255, 255, 0, 0.4); /* Soft Yellow shadow */
    }

    @keyframes neonGlow {
        0% {
            text-shadow: 
                0 0 3px rgba(0, 255, 0, 0.5),
                0 0 6px rgba(0, 255, 0, 0.6),
                0 0 9px rgba(0, 255, 0, 0.7),
                0 1px 8px rgba(255, 255, 255, 0.2),
                0 1px 10px rgba(255, 255, 0, 0.4);
        }
        100% {
            text-shadow: 
                0 0 6px rgba(0, 255, 0, 0.5),
                0 0 12px rgba(0, 255, 0, 0.6),
                0 0 15px rgba(0, 255, 0, 0.7),
                0 1px 12px rgba(255, 255, 255, 0.3),
                0 1px 15px rgba(255, 255, 0, 0.5);
        }
    }

    .neon-banner {
        animation: neonGlow 1.5s ease-in-out infinite alternate;
    }
</style>

    
    <script>
        // Function to search for anime episode
        function searchEpisode() {
            const query = document.getElementById('search-input').value;
            if (query) {
                window.location.href = `/search/?q=${encodeURIComponent(query)}`;
            }
        }

        // Add event listener for 'Enter' key press on the search input
        document.getElementById('search-input').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                searchEpisode();  // Trigger search when Enter key is pressed
            }
        });

        // Get query from URL
        const urlParams = new URLSearchParams(window.location.search);
        const episodeQuery = urlParams.get('id');

        // Split the episodeQuery to get the anime title and episode number
        const [animeTitle, episodeNum] = episodeQuery.split('-episode-'); 
        const formattedEpisodeName = `${animeTitle.charAt(0).toUpperCase() + animeTitle.slice(1)} Episode ${episodeNum}`;

        // Set the episode name dynamically
        document.getElementById('episodeName').textContent = formattedEpisodeName;

        // Fetch the video data from the API
        fetch(`https://animetize-api.vercel.app/watch/${episodeQuery}`)
            .then(response => response.json())
            .then(data => {
                // Hide preloader and show video container
                document.getElementById('preloader').style.display = 'none';
                document.getElementById('videoContainer').style.display = 'block';

                const videoPlayer = document.getElementById('videoPlayer');
                const qualityButtonsContainer = document.getElementById('qualityButtons');

                // Set the default video source (the highest quality)
                const defaultSource = data.sources.find(source => source.quality === '1080p')?.url || data.sources[0].url;
                videoPlayer.src = defaultSource;

                // Create quality buttons
                data.sources.forEach(source => {
                    const button = document.createElement('button');
                    button.textContent = `${source.quality}`;
                    button.onclick = () => changeVideoSource(source.url);
                    qualityButtonsContainer.appendChild(button);
                });

                // Set previous and next episode buttons
                const episodeNumInt = parseInt(episodeNum, 10);
                const previousEpisode = episodeNumInt > 1 ? episodeNumInt - 1 : episodeNumInt;
                const nextEpisode = episodeNumInt + 1;

                document.getElementById('previousButton').onclick = () => navigateToEpisode(animeTitle, previousEpisode);
                document.getElementById('nextButton').onclick = () => navigateToEpisode(animeTitle, nextEpisode);
            })
            .catch(error => console.error('Error fetching video data:', error));

        // Function to change video source based on quality selected
        function changeVideoSource(url) {
            const videoPlayer = document.getElementById('videoPlayer');
            videoPlayer.src = url;
            videoPlayer.play();
        }

        // Function to navigate to previous or next episode
        function navigateToEpisode(animeTitle, episodeNum) {
            window.location.href = `./?id=${animeTitle}-episode-${episodeNum}`;
        }
    </script>

</body>
</html>
